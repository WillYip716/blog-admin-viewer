(this["webpackJsonpblog-admin-viewer"]=this["webpackJsonpblog-admin-viewer"]||[]).push([[0],{32:function(e,t,a){e.exports=a(59)},59:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(30),o=a.n(r),i=a(1),c=a(16),u=a(10),s=a(11),p=a(13),m=a(12),h=a(7),b=a.n(h),g=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.title,l=t.article,r={headers:{"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("blogusertoken")}};b.a.put("https://gentle-reaches-06177.herokuapp.com/posts/"+n.props.match.params.id,{title:a,content:l},r).then((function(e){e.data&&n.setState((function(t){return{timestamp:e.data.timestamp}}))}))},n.publishtoggle=function(e){e.preventDefault();var t={headers:{"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("blogusertoken")}};b.a.put("https://gentle-reaches-06177.herokuapp.com/posts/"+n.props.match.params.id+"/publish",{},t).then((function(e){e.data&&n.setState((function(t){return{published:e.data.published}}))}))},n.deletebutton=function(e){e.preventDefault();var t={headers:{"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("blogusertoken")}};b.a.delete("https://gentle-reaches-06177.herokuapp.com/posts/"+n.props.match.params.id+"/delete",t).then((function(e){n.props.history.push("/")}))},n.state={loading:!0,title:"",article:"",timestamp:"",published:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("https://gentle-reaches-06177.herokuapp.com/posts/"+this.props.match.params.id).then((function(t){var a=t.data;e.setState((function(e){return{loading:!1,title:a.title,article:a.article,timestamp:a.timestamp,published:a.published}}))}))}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.article;return this.state.loading?l.a.createElement("p",null,"Page is loading"):l.a.createElement("section",null,l.a.createElement("button",{onClick:this.publishtoggle},this.state.published?"Unpublish":"Publish"),l.a.createElement("button",{onClick:this.deletebutton},"DELETE"),l.a.createElement("p",null,"Updated ",this.state.timestamp),l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("label",null,"Title:"),l.a.createElement("input",{type:"text",name:"title",value:t,onChange:this.onChange}),l.a.createElement("label",null,"Article:"),l.a.createElement("textarea",{className:"article_input",type:"text",name:"article",value:a,onChange:this.onChange}),l.a.createElement("button",{type:"submit"},"Submit")))}}]),a}(l.a.Component),d=a(8),f=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loading:!0,posts:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("https://gentle-reaches-06177.herokuapp.com/posts").then((function(t){var a=t.data;e.setState((function(e){return{loading:!1,posts:a}}))}))}},{key:"render",value:function(){return l.a.createElement("div",null,this.state.loading?l.a.createElement("h1",null,"Hello i am loading"):l.a.createElement("div",null,this.state.posts.map((function(e){return l.a.createElement(d.b,{to:"/post/".concat(e._id),key:e._id},l.a.createElement("h1",null,e.title),l.a.createElement("p",null,e.timestamp))}))))}}]),a}(l.a.Component),E=a(15);var v=function(){var e=Object(n.useState)(""+localStorage.getItem("blogusertoken")),t=Object(E.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)("false"),i=Object(E.a)(o,2),c=i[0],u=i[1],s=Object(n.useState)(""),p=Object(E.a)(s,2),m=p[0],h=p[1],g=Object(n.useState)(""),f=Object(E.a)(g,2),v=f[0],S=f[1],k=function(e){e.preventDefault(),u("true")},j=function(e){e.preventDefault(),u("false"),r(""),localStorage.removeItem("bloguserid"),localStorage.removeItem("blogusertoken")},C=function(e){e.preventDefault(),b.a.post("https://gentle-reaches-06177.herokuapp.com/login",{username:m,password:v}).then((function(e){e.data.token&&(localStorage.setItem("blogusertoken",e.data.token),localStorage.setItem("bloguserid",e.data.userid),r(e.data.token),u("false"),h(""),S(""))}))};return l.a.createElement("ul",null,l.a.createElement(d.b,{to:"/"},"Home"),l.a.createElement("div",null,a&&"null"!==a?l.a.createElement("div",null,l.a.createElement(d.b,{to:"/createpost"},"Create Post"),l.a.createElement("br",null),l.a.createElement("a",{href:"/",onClick:j},"Log Out")):"true"!==c?l.a.createElement("li",null,l.a.createElement("a",{href:"/",onClick:k},"Log in")):l.a.createElement("section",null,l.a.createElement("form",{onSubmit:C},l.a.createElement("label",null,"Username:"),l.a.createElement("input",{type:"text",name:"username",value:m,onChange:function(e){return h(e.target.value)}}),l.a.createElement("label",null,"Password:"),l.a.createElement("input",{type:"password",name:"password",value:v,onChange:function(e){return S(e.target.value)}}),l.a.createElement("button",{type:"submit"},"Submit")))))},S=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.title,l=t.article,r={headers:{"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("blogusertoken")}};b.a.post("https://gentle-reaches-06177.herokuapp.com/posts/create",{title:a,content:l,id:localStorage.getItem("bloguserid")},r).then((function(e){e.data&&n.props.history.push("/post/"+e.data._id)}))},n.state={title:"",article:""},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.article;return this.state.loading?l.a.createElement("p",null,"Page is loading"):l.a.createElement("section",null,l.a.createElement("p",null,"Create a post"),l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("label",null,"Title:"),l.a.createElement("input",{type:"text",name:"title",value:t,onChange:this.onChange}),l.a.createElement("label",null,"Article:"),l.a.createElement("textarea",{className:"article_input",type:"text",name:"article",value:a,onChange:this.onChange}),l.a.createElement("button",{type:"submit"},"Submit")))}}]),a}(l.a.Component);var k=function(){return l.a.createElement("div",null,l.a.createElement(v,null),l.a.createElement(i.a,{path:"/",exact:!0,component:f}),l.a.createElement(i.a,{path:"/post/:id",exact:!0,component:g}),l.a.createElement(i.a,{path:"/createpost",exact:!0,component:S}))};o.a.render(l.a.createElement(d.a,null,l.a.createElement(k,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.6e7733bc.chunk.js.map